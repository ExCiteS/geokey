{% extends 'base.html' %}

{% load project_attributes %}

{% block title %} | Superuser tools{% endblock %}

{% block main %}
<div class="page-header">
    <div class="container">
        <h1>Superuser tools</h1>

        <ul class="nav nav-tabs header-nav">
            <li role="presentation"><a href="{% url 'admin:superuser_index' %}">Platform settings</a></li>
            <li role="presentation"><a href="{% url 'admin:superuser_manage_users' %}">Manage superusers</a></li>
            <li role="presentation"><a href="{% url 'admin:superuser_manage_inactiveusers' %}">Activate inactive users</a></li>
            <li role="presentation" class="active"><a href="{% url 'admin:superuser_projects' %}">Manage all projects</a></li>
        </ul>
    </div>
</div>


<div class="container">
    {% include 'snippets/messages.html' %}

    <div class="row">
        <div class="col-sm-12 col-md-12 col-lg-12">
            <h3 class="header">Manage all projects</h3>

            {% if projects|length %}
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Creator</th>
                        <th>Date created</th>
                        <th>Contributions</th>
                        <th>Comments</th>
                        <th>Files</th>
                        <th>Status</th>
                    </tr>
                </thead>

                <tbody>
                    {% for project in projects %}
                        <tr>
                            <td>
                                <h4>
                                    <a href="{% url 'admin:project_overview' project.id %}">{{ project.name }}</a>
                                </h4>
                            </td>

                            <td>{{ project.creator }}</td>
                            <td>{{ project.created_at|timesince }} ago</td>

                            <td class="text-center">{{ project.contributions_count }}</td>
                            <td class="text-center">{{ project.comments_count }}</td>
                            <td class="text-center">{{ project.files_count }}</td>

                            <td>
                                {% if not project.isprivate %}
                                    <span class="label label-info">Public</span>
                                {% else %}
                                    <span class="label label-info">Private</span>
                                {% endif %}

                                {% if project.status == 'inactive' %}
                                    <span class="label label-warning">Archived</span>
                                {% endif %}
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% else %}
                <p>No projects were found.</p>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
